// ########################
// ##### ACCESS POINT #####
// ########################

//Libraries
#include <ESP8266WiFi.h> //Library for NodeMCU

//Network AP infos
const char* ssid = "DVCTF2023_Part1"; //SSID
const char* password = "PAPAbiscoitos"; //Password

int conn_clients = 0;

WiFiServer server(80); //Create webserver on port 80

void setup(){
  Serial.begin(115200);
  Serial.println();
  
  //Setting up the access point
  Serial.print("Setting AP (Access Point)â€¦");
  WiFi.softAP(ssid, password);

  //Get AP IP address
  IPAddress IP = WiFi.softAPIP();
  Serial.print("AP IP address: ");
  Serial.println(IP);
  
  server.begin(); //Start webserver
}
 
void loop(){
  //Get the number of connected clients
  int clients = WiFi.softAPgetStationNum();
  if (clients != conn_clients) {
    Serial.print(clients);
    Serial.println(" client(s) connected to access point!");
  }
  conn_clients = clients;
}
